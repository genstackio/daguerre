{
  "name": "GoTombola Platform",
  "schemas": {
    "architecture": {
      "expand": ["all"]
    },
    "dynamodb": {
      "expand": ["db"]
    },
    "architecture-layers": {
      "collapse": ["all"]
    },
    "storages": {
      "show": ["api", "events", "lambda-layers", "storage", "db", "api-search"]
    },
    "admin": {
      "expand": ["admin"],
      "personae": [],
      "partners": []
    },
    "participate": {
      "collapse": ["db"],
      "clusters": ["pages", "sales", "api-game", "api", "events"],
      "personae": ["game-participants"],
      "partners": ["all"]
    }
  },
  "partners": {
    "stripe": {
      "links": [
        "> cdns/api-gateway"
      ]
    },
    "paypal": {},
    "lydia": {},
    "smsfactor": {
      "links": [
        "> cdns/api-gateway"
      ]
    },
    "callr": {
      "links": [
        "> cdns/api-gateway"
      ]
    },
    "slack": {}
  },
  "personae": {
    "super-admin": {
      "links": [
        "> cdns/admin",
        "> cdns/api",
        "> cdns/uploads-public",
        "> cdns/redirect"
      ]
    },
    "admins": {
      "multiple": true,
      "links": [
        "> cdns/api",
        "> cdns/manager",
        "> cdns/pages",
        "> cdns/uploads-public",
        "> cdns/redirect"
      ]
    },
    "game-participants": {
      "multiple": true,
      "links": [
        "> cdns/errors",
        "> cdns/pages",
        "> cdns/sales",
        "> cdns/widget",
        "> cdns/api-image",
        "> cdns/api-files",
        "> cdns/api-qrcode",
        "> cdns/api-widget",
        "> cdns/api-payment",
        "> cdns/api-pdf",
        "> cdns/redirect"
      ]
    },
    "game-organizers": {
      "multiple": true,
      "links": [
        "> cdns/errors",
        "> cdns/bridge",
        "> cdns/pages",
        "> cdns/api-spreadsheet",
        "> cdns/api-auth",
        "> cdns/api-payment",
        "> cdns/api-doc",
        "> cdns/api-qrcode",
        "> cdns/api-image",
        "> cdns/api-files",
        "> cdns/uploads-public",
        "> cdns/redirect"
      ]
    }
  },
  "layers": {
    "admin": {
      "type": "genstackio/layer-admin/aws",
      "in": ["webapps"],
      "requires": [
        "api"
      ]
    },
    "api": {
      "type": "genstackio/layer-api-nodejs/aws",
      "in": ["apis"],
      "links": [
        "lambdas/api > bus",
        "lambdas/api > tables",
        "lambdas/api > cdns/api-search",
        "lambdas/api > buckets/userdocs",
        "lambdas/api > buckets/uploads"
      ]
    },
    "api-app": {
      "type": "genstackio/layer-api-nodejs/aws",
      "in": ["apis", "microservices"]
    },
    "api-auth": {
      "type": "genstackio/layer-api-nodejs/aws",
      "in": ["apis", "microservices"]
    },
    "api-bridge": {
      "type": "genstackio/layer-api-nodejs/aws",
      "in": ["apis", "microservices"],
      "links": [
        "lambdas/api-bridge > cdns/api"
      ]
    },
    "api-connector": {
      "type": "genstackio/layer-api-nodejs/aws",
      "in": ["apis", "microservices"],
      "links": [
        "lambdas/api-connector > partners/slack"
      ]
    },
    "api-directory": {
      "type": "genstackio/layer-api-go/aws",
      "in": ["apis", "microservices"]
    },
    "api-doc": {
      "type": "genstackio/layer-api-nodejs/aws",
      "in": ["apis", "microservices"]
    },
    "api-draw": {
      "type": "genstackio/layer-api-go/aws",
      "in": ["apis", "microservices"]
    },
    "api-email": {
      "type": "genstackio/layer-api-go/aws",
      "in": ["apis", "microservices"],
      "links": [
        "lambdas/api-email > ses/com"
      ]
    },
    "api-event": {
      "type": "genstackio/layer-api-go/aws",
      "in": ["apis", "microservices"],
      "links": [
        "lambdas/api-event > cdns/api"
      ]
    },
    "api-files": {
      "type": "genstackio/layer-api-nodejs/aws",
      "in": ["apis", "microservices"],
      "links": [
        "lambdas/api-files > cdns/api-game",
        "lambdas/api-files > cdns/api-user"
      ]
    },
    "api-game": {
      "type": "genstackio/layer-api-go/aws",
      "in": ["apis", "microservices"],
      "links": [
        "lambdas/api-game > cdns/api",
        "cdns/api-game > buckets/cache-public"
      ]
    },
    "api-gateway": {
      "type": "genstackio/layer-api-go/aws",
      "in": ["apis", "microservices"],
      "links": [
        "lambdas/api-gateway > cdns/api",
        "lambdas/api-gateway > cdns/api-event",
        "lambdas/api-gateway > cdns/api-sms"
      ]
    },
    "api-image": {
      "type": "genstackio/layer-api-nodejs/aws",
      "in": ["apis", "microservices"],
      "links": [
        "lambdas/api-image > cdns/api-game",
        "lambdas/api-image > cdns/api-user"
      ]
    },
    "api-payment": {
      "type": "genstackio/layer-api-go/aws",
      "in": ["apis", "microservices"],
      "links": [
        "lambdas/api-payment > cdns/api",
        "lambdas/api-payment > partners/stripe",
        "lambdas/api-payment > partners/paypal",
        "lambdas/api-payment > partners/lydia"
      ]
    },
    "api-pdf": {
      "type": "genstackio/layer-api-nodejs/aws",
      "in": ["apis", "microservices"]
    },
    "api-push": {
      "type": "genstackio/layer-api-go/aws",
      "in": ["apis", "microservices"]
    },
    "api-qrcode": {
      "type": "genstackio/layer-api-go/aws",
      "in": ["apis", "microservices"]
    },
    "api-redirect": {
      "type": "genstackio/layer-api-go/aws",
      "in": ["apis", "microservices"],
      "links": [
        "lambdas/api-redirect > cdns/api"
      ]
    },
    "api-search": {
      "type": "genstackio/layer-search/aws",
      "in": ["apis", "microservices"]
    },
    "api-sherlock": {
      "type": "genstackio/layer-api-nodejs/aws",
      "in": ["apis", "microservices"]
    },
    "api-sms": {
      "type": "genstackio/layer-api-go/aws",
      "in": ["apis", "microservices"],
      "links": [
        "lambdas/api-sms > partners/callr",
        "lambdas/api-sms > partners/smsfactor"
      ]
    },
    "api-social": {
      "type": "genstackio/layer-api-go/aws",
      "in": ["apis", "microservices"]
    },
    "api-spreadsheet": {
      "type": "genstackio/layer-api-nodejs/aws",
      "in": ["apis", "microservices"],
      "links": [
        "lambdas/api-spreadsheet > cdns/api"
      ]
    },
    "api-stats": {
      "type": "genstackio/layer-api-go/aws",
      "in": ["apis", "microservices"]
    },
    "api-svg": {
      "type": "genstackio/layer-api-go/aws",
      "in": ["apis", "microservices"]
    },
    "api-template": {
      "type": "genstackio/layer-api-nodejs/aws",
      "in": ["apis", "microservices"]
    },
    "api-ticket": {
      "type": "genstackio/layer-api-go/aws",
      "in": ["apis", "microservices"]
    },
    "api-user": {
      "type": "genstackio/layer-api-go/aws",
      "in": ["apis", "microservices"],
      "links": [
        "lambdas/api-user > cdns/api"
      ]
    },
    "api-video": {
      "type": "genstackio/layer-api-nodejs/aws",
      "in": ["apis", "microservices"],
      "links": [
        "lambdas/api-video > buckets/userdocs"
      ]
    },
    "api-widget": {
      "type": "genstackio/layer-api-go/aws",
      "in": ["apis", "microservices"],
      "links": [
        "lambdas/api-widget > cdns/api"
      ]
    },
    "blog": {
      "type": "genstackio/layer-cdn/aws",
      "in": []
    },
    "bridge": {
      "type": "genstackio/layer-app/aws",
      "in": [],
      "links": [
      ]
    },
    "com": {
      "type": "genstackio/layer-com/aws",
      "in": []
    },
    "db": {
      "type": "custom",
      "in": [],
      "tables": {
        "game_beneficiary": {
          "links": [
            "> tables/game_game"
          ]
        },
        "game_bunch": {
          "links": [
            "> tables/game_game"
          ]
        },
        "game_draw": {
          "links": [
            "> tables/game_game"
          ]
        },
        "game_gachievement": {
          "links": [
            "> tables/game_game"
          ]
        },
        "game_game": {
          "links": [
            "> tables/user_organization"
          ]
        },
        "game_gaudio": {
          "links": [
            "> tables/game_game"
          ]
        },
        "game_gimage": {
          "links": [
            "> tables/game_game"
          ]
        },
        "game_godfather": {
          "links": [
            "> tables/game_game"
          ]
        },
        "game_greport": {
          "links": [
            "> tables/game_game"
          ]
        },
        "game_gvideo": {
          "links": [
            "> tables/game_game"
          ]
        },
        "game_input": {
          "links": [
            "> tables/game_game"
          ]
        },
        "game_keyword": {
          "links": [
            "> tables/game_game"
          ]
        },
        "game_pack": {
          "links": [
            "> tables/game_game"
          ]
        },
        "game_preorder": {
          "links": [
            "> tables/game_game"
          ]
        },
        "game_project": {
          "links": [
            "> tables/game_game"
          ]
        },
        "game_promise": {
          "links": [
            "> tables/game_game"
          ]
        },
        "game_sale": {
          "links": [
            "> tables/game_game"
          ]
        },
        "game_seller": {
          "links": [
            "> tables/game_game"
          ]
        },
        "game_sellergroup": {
          "links": [
            "> tables/game_game"
          ]
        },
        "game_sponsoring": {
          "links": [
            "> tables/game_game"
          ]
        },
        "game_ticket": {
          "links": [
            "> tables/game_game",
            "> tables/game_sale"
          ]
        },
        "game_winner":{
          "links": [
            "> tables/game_draw"
          ]
        },
        "tenant_partner":{
          "links": [
            "> tables/tenant_tenant"
          ]
        },
        "user_user":{
          "links": [
            "> tables/tenant_tenant"
          ]
        },
        "user_organization":{
          "links": [
            "> tables/user_user",
            "> tables/tenant_partner",
            "> tables/tenant_tenant"
          ]
        },
        "tenant_tenant":{
        }
      }
    },
    "dns": {
      "type": "genstackio/layer-dns/aws",
      "in": [],
      "zones": {
        "gotombola.co": {},
        "gotombola.com": {},
        "gotb.la": {}
      },
      "links": [
        "zones/gotb.la > cdns/redirect",
        "zones/gotombola.co > records/front",
        "zones/gotombola.co > records/api",
        "zones/gotombola.co > records/admin",
        "zones/gotombola.co > records/manager",
        "zones/gotombola.co > records/sales",
        "zones/gotombola.co > records/pages"
      ]
    },
    "errors": {
      "type": "genstackio/layer-api-nodejs/aws",
      "in": [],
      "buckets": {
        "errors-assets": {}
      },
      "links": [
        "cdns/errors > buckets/errors-assets"
      ],
      "webclients": {
        "{{name}}": {
          "framework": "razzle"
        }
      }
    },
    "events": {
      "type": "custom",
      "in": [],
      "lambdas": {
        "dbsync": {},
        "events": {},
        "jobs": {}
      },
      "links": [
        "lambdas/dbsync > cdns/api-search",
        "tables/all > lambdas/dbsync",
        "bus > lambdas/events",
        "bus > lambdas/jobs",
        "lambdas/events > cdns/api-template",
        "lambdas/events > cdns/api-email",
        "lambdas/events > cdns/api-sms",
        "lambdas/events > lambdas/api-video",
        "lambdas/events > cdns/api-stats",
        "lambdas/events > cdns/api-draw",
        "lambdas/events > topics/public-events",
        "lambdas/jobs > cdns/api"
      ]
    },
    "front": {
      "type": "genstackio/layer-cdn/aws",
      "in": []
    },
    "lambda-layers": {
      "type": "genstackio/layer-lambda-layers/aws",
      "in": []
    },
    "lambda-registry": {
      "type": "genstackio/layer-lambda-registry/aws",
      "in": []
    },
    "manager": {
      "type": "genstackio/layer-admin/aws",
      "in": []
    },
    "pages": {
      "type": "genstackio/layer-api-nodejs/aws",
      "in": [],
      "webclients": {
        "{{name}}": {
          "framework": "razzle"
        }
      },
      "buckets": {
        "pages-assets": {}
      },
      "links": [
        "cdns/pages > buckets/pages-assets/aws"
      ]
    },
    "redirect": {
      "type": "genstackio/layer-redirect/aws",
      "in": [],
      "links": [
        "edges/redirect > buckets/cache-public"
      ]
    },
    "sales": {
      "type": "genstackio/layer-api-nodejs/aws",
      "in": [],
      "buckets": {
        "sales-assets": {}
      },
      "links": [
        "cdns/sales > buckets/sales-assets"
      ],
      "webclients": {
        "{{name}}": {
          "framework": "razzle"
        }
      }
    },
    "starter": {
      "type": "genstackio/layer-starter/aws",
      "in": []
    },
    "statics": {
      "type": "genstackio/layer-statics/aws",
      "in": []
    },
    "storage": {
      "type": "custom",
      "in": [],
      "buckets": {
        "cache-public": {},
        "cache-private": {},
        "userdocs": {},
        "uploads": {}
      }
    },
    "storybook": {
      "type": "genstackio/layer-storybook/aws",
      "in": []
    },
    "streams-public": {
      "type": "genstackio/layer-dyncdn/aws",
      "in": []
    },
    "subscriptions": {
      "type": "custom",
      "in": [],
      "links": [
        "topics/public-events > cdns/api-connector"
      ]
    },
    "topics": {
      "type": "custom",
      "in": [],
      "topics": {
        "public-events": {}
      }
    },
    "uploads-public": {
      "type": "genstackio/layer-dyncdn/aws",
      "in": [],
      "links": [
        "edges/uploads-public > buckets/uploads"
      ]
    },
    "widget": {
      "type": "genstackio/layer-widget/aws",
      "in": []
    }
  }
}